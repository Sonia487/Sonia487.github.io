<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>E-ticket</title>
	<!--網路加入檔案-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
	<!--本地加入檔案，尚未測試成功-->
	<!--script type="text/javascript" src="C:\Users\may\Desktop\測試PA\bootstrap.min"></script>
	<link rel="stylesheet" href="C:\Users\may\Desktop\測試PA\bootstrap.min"-->
  
  <style>
    /* 彈出視窗的基本樣式 */
    .modal {
      display: none;  /* 初始隱藏 */
      position: fixed;
      z-index: 1; /* 確保彈出視窗在最上層 */
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5); /* 半透明背景 */
      justify-content: center;
      align-items: center;
    }

    /* 彈出視窗內容樣式 */
    .modal-content {
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      width: 300px;
      text-align: center;
    }

    /* 關閉按鈕樣式 */
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
  </style>

</head>
<body>
	<div class="container px-4 bg-light">
	<!--大標題 container網格容器 排版用包含(px,gx,p,col...)/-->
		<h1 class="p-3 mb-2 bg-primary text-white text-center">澎湖之美旅行社</h1>

	<figure class="text-center">
  <blockquote class="blockquote">
    <p>票券生產器網頁版</p>
  </blockquote>
  <figcaption class="blockquote">
  	<!-- 觸發彈出視窗，讓人可以輸入票券資料的按鈕 -->
    <button class="btn btn-lg btn-danger fw-bold" id="openModalBtn">點這粒開始製作</button>
  </figcaption>
</figure>

	<div class="container px-4 " style="width: 400px; font-family:DFKai-sb;">
		<table class=" border-dark table-primary table-bordered table table-sm table-responsive-sm" style="padding-top: 50%;" id="myTable">
			<tr class="col">
				<td class="border-2 text-center " colspan="2">澎湖之美旅行社-電子票券</td>
			</tr>
			<tr class="border-2 border-top-0 border-bottom-0">
				<td class="border-1" style="width: 35%;">旅客/電話</td>
				<td class="border-1"></td>
			</tr>
			<tr class="border-2 border-top-0 border-bottom-0">
				<td class="border-1">日期/行程/人數</td>
				<td class="border-1"></td>
			</tr>
			<tr class="border-2 border-top-0 border-bottom-0">
				<td class="border-1">報到/開始時間</td>
				<td class="border-1"></td>
			</tr>
			<tr class="border-2 border-top-0 border-bottom-0">
				<td class="border-1">行程業者</td>
				<td class="border-1"></td>
			</tr>
			<tr class="border-2 border-top-0 border-bottom-0">
				<td class="border-1">報到地點</td>
				<td class="border-1"></td>
			</tr>
			<tr class="border-2 border-top-0">
				<td class="border-1">備註</td>
				<td class="border-1" style="flex: 1;"></td>
			</tr>
		</table>
	</div>
	
  		<div class="container px-6 text-center " style="width: 400px;">
  		<div class="row justify-content-center gx-6">
    		<div class="col">
    			<div class="p-2">
      			<button type="button" class="btn btn-primary">複製圖片</button>
      		</div>
    		</div>
    		<div class="col">
    			<div class="p-2">
      			<button type="button" class="btn btn-primary" id="convert">下載圖片</button>
      		</div>
    		</div>
    		<div class="col">
    			<div class="p-2">
      			<button type="button" class="btn btn-primary">分享到~</button>
      		</div>
    		</div>
  		</div>
  		</div>

  		<div class="container px-6 text-center " style="width: 400px;">
  		<div class="row justify-content-center gx-6">
    		<div class="col">
    			<div class="p-2">
      			<button type="button" class="btn btn-primary">歷史資料</button>
      			</div>
    		</div>
    		<div class="col">
    				<div class="p-2">
      			<button type="button" class="btn btn-primary">批量製作</button>
      			</div>
    		</div>
    		<div class="col">
    			<div class="p-2">
      			<button type="button" class="btn btn-primary">還在想~</button>
      			</div>
    		</div>
  		</div>
  		</div>

  	</div>	

  	  <!-- 彈出視窗 -->
  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close text-end" id="closeModalBtn">&times;</span>
      <p>這是彈出式視窗內容</p>
    </div>
  </div>


<div id="result">
         <!-- Result will appear be here -->
      </div>

<script type="text/javascript" src="https://github.com/niklasvh/html2canvas/releases/download/0.5.0-alpha1/html2canvas.js"></script>
      <script>
         //convert table to image            
         function convertToImage() {
            var resultDiv = document.getElementById("result");
            html2canvas(document.getElementById("myTable"), {
                onrendered: function(canvas) {
                    var img = canvas.toDataURL("image/png");
                    result.innerHTML = '<a download="test.jpeg" href="'+img+'">test</a>';
                    }
            });
         }        
         //click event
         var convertBtn = document.getElementById("convert");
         convertBtn.addEventListener('click', convertToImage);
    

          // 獲取彈出視窗和按鈕元素
    const modal = document.getElementById("myModal");
    const openModalBtn = document.getElementById("openModalBtn");
    const closeModalBtn = document.getElementById("closeModalBtn");

    // 點擊按鈕顯示彈出視窗
    openModalBtn.onclick = function() {
      modal.style.display = "flex"; // 顯示視窗
    }

    // 點擊關閉按鈕隱藏彈出視窗
    closeModalBtn.onclick = function() {
      modal.style.display = "none"; // 隱藏視窗
    }

    // 點擊視窗外部區域也會關閉彈出視窗
    window.onclick = function(event) {
      if (event.target === modal) {
        modal.style.display = "none";
      }
    }

      </script>

	<!--script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
	
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.1/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script-->
</body>
</html>